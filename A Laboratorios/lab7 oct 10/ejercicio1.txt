/* Main.c file generated by New Project wizard
 *
 * Created:   sáb sep 14 2019
 * Processor: PIC16F84A
 * Compiler:  MPLAB XC8
 */

#include <xc.h>
#define _XTAL_FREQ 1000000

int proceso =0;
void girarmotor (int pulsos);
void main(void)
 {
   //Configuramos los puertos
    int pulsos = 0;	
    TRISA=1; 		//Configuramos el puerto A como entrada
    TRISB=0; 		//Configuramos el puerto B como salida
    PORTA=0; 		//Iniciamos los pines del puerto A
    PORTB=0; 		//Iniciamos los pines del puerto B
    while(1){
        //validamos si se presiona el boton dedo meñique
       if(PORTAbits.RA0){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     //realizamos el tren de pilsos de corriente
	     girarmotor(pulsos);
	     
	//validamos si se presiona el boton dedo anular     
      if(PORTAbits.RA1){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     //realizamos el tren de pilsos de corriente
	     girarmotor(pulsos);
	     
      //validamos si se presiona el boton dedo medio     
      if(PORTAbits.RA2){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     //realizamos el tren de pilsos de corriente
	     girarmotor(pulsos);
	     
      //validamos si se presiona el boton dedo indice     
      if(PORTAbits.RA3){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     //realizamos el tren de pilsos de corriente
	     girarmotor(pulsos);
      //validamos si se presiona el boton dedo pulgar     
      if(PORTAbits.RA4){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     //realizamos el tren de pilsos de corriente
	     girarmotor(pulsos);
    };
 }
void girarmotor(int pulsos){
   //motor dedo meñique
   if(PORTAbits.RA0){
      if(proceso == 1){
	 switch(pulsos){
	    case 1: //posocionamos el motor a 90 grados
	       //realizamos pulso de 2ms
	    for(int i=0; i<16;i++){
	       PORTBbits.RB0 =1;
	       __delay_ms(1.5);
	       PORTBbits.RB0 = 0;
	       __delay_ms(20);
	       }
	       proceso = 0;
	    break;
	    case 2: //posicionamos el motor servo a 180
	       //realizamos 16 pulso de 4ms
	    for(int i=0; i<16;i++){
	       PORTBbits.RB0 =1;
	       __delay_ms(2);
	       PORTBbits.RB0 = 0;
	       __delay_ms(20);
	       }
	       proceso = 0;
	    break;
	    case 3: //posicionamos el motor servo a 180
	       //realizamos 16 pulso de 4ms
	    for(int i=0; i<16;i++){
	       PORTBbits.RB0 =1;
	       __delay_ms(0.6);
	       PORTBbits.RB0 = 0;
	       __delay_ms(20);
	       }
	       proceso = 0;
	    break;
	    }
	 }
      }else
//motor dedo anular
if(PORTAbits.RA1){
   if(proceso == 1){
      switch(pulsos){
	 case 1: //posocionamos el motor a 90 grados
	    //realizamos pulso de 2ms
	 for(int i=0; i<16;i++){
	    PORTBbits.RB1 =1;
	    __delay_ms(1.5);
	    PORTBbits.RB1 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	break;
	case 2: //posicionamos el motor servo a 180
	   //realizamos 16 pulso de 4ms
	for(int i=0; i<16;i++){
	   PORTBbits.RB1 =1;
	   __delay_ms(2);
	   PORTBbits.RB1 = 0;
	   __delay_ms(20);
	   }
	   proceso = 0;
	 break;
	 case 3: //posicionamos el motor servo a 180
	    //realizamos 16 pulso de 4ms
	 for(int i=0; i<16;i++){
	    PORTBbits.RB1 =1;
	    __delay_ms(0.6);
	    PORTBbits.RB1 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	 break;
	}
     }
  }else
//motor dedo medio
if(PORTAbits.RA2){
   if(proceso == 1){
      switch(pulsos){
	 case 1: //posocionamos el motor a 90 grados
	    //realizamos pulso de 2ms
	 for(int i=0; i<16;i++){
	    PORTBbits.RB2 =1;
	    __delay_ms(1.5);
	    PORTBbits.RB2 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	break;
	case 2: //posicionamos el motor servo a 180
	   //realizamos 16 pulso de 4ms
	for(int i=0; i<16;i++){
	    PORTBbits.RB2 =1;
	    __delay_ms(2);
	    PORTBbits.RB2 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	 break;
	 case 3: //posicionamos el motor servo a 180
	    //realizamos 16 pulso de 4ms
	 for(int i=0; i<16;i++){
	    PORTBbits.RB2 =1;
	    __delay_ms(0.6);
	    PORTBbits.RB2 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	 break;
	}
     }
  }else
//motor dedo indice
if(PORTAbits.RA3){
   if(proceso == 1){
      switch(pulsos){
	 case 1: //posocionamos el motor a 90 grados
	 //realizamos pulso de 2ms
	for(int i=0; i<16;i++){
	 PORTBbits.RB3 =1;
	 __delay_ms(1.5);
	 PORTBbits.RB3 = 0;
	 __delay_ms(20);
	 }
	 proceso = 0;
	break;
	case 2: //posicionamos el motor servo a 180
	//realizamos 16 pulso de 4ms
	 for(int i=0; i<16;i++){
	  PORTBbits.RB3 =1;
	  __delay_ms(2);
	  PORTBbits.RB3 = 0;
	  __delay_ms(20);
	  }
	  proceso = 0;
	 break;
	 case 3: //posicionamos el motor servo a 180
	 //realizamos 16 pulso de 4ms
	 for(int i=0; i<16;i++){
	  PORTBbits.RB3 =1;
	  __delay_ms(0.6);
	  PORTBbits.RB3 = 0;
	  __delay_ms(20);
	  }
	 proceso = 0;
	 break;
	}
     }
  }else
//motor dedo pulgar
if(PORTAbits.RA4){
   if(proceso == 1){
      switch(pulsos){
	 case 1: //posocionamos el motor a 90 grados
	 //realizamos pulso de 2ms
	for(int i=0; i<16;i++){
	 PORTBbits.RB4 =1;
	 __delay_ms(1.5);
	 PORTBbits.RB4 = 0;
	 __delay_ms(20);
	 }
	 proceso = 0;
	break;
	case 2: //posicionamos el motor servo a 180
	//realizamos 16 pulso de 4ms
	 for(int i=0; i<16;i++){
	  PORTBbits.RB4 =1;
	  __delay_ms(2);
	  PORTBbits.RB4 = 0;
	  __delay_ms(20);
	  }
	  proceso = 0;
	 break;
	 case 3: //posicionamos el motor servo a 180
	 //realizamos 16 pulso de 4ms
	 for(int i=0; i<16;i++){
	  PORTBbits.RB4 =1;
	  __delay_ms(0.6);
	  PORTBbits.RB4 = 0;
	  __delay_ms(20);
	  }
	 proceso = 0;
	 break;
	}
     }
  }
}
































#include <xc.h>
#define _XTAL_FREQ 1000000

int proceso =0;
void girarmotor (int pulsos);
void main(void)
 {
    int pulsos = 0;	
    TRISA=1; 		
    TRISB=0; 		
    PORTA=0; 		
    PORTB=0; 		
    while(1){
       if(PORTAbits.RA0){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     girarmotor(pulsos);    
      if(PORTAbits.RA1){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     girarmotor(pulsos);    
      if(PORTAbits.RA2){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     girarmotor(pulsos);    
      if(PORTAbits.RA3){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     girarmotor(pulsos);    
      if(PORTAbits.RA4){
	  proceso = 1;
	  if(pulsos == 3) {
	     pulsos =1 ;
	     }else{
		pulsos +=1;
		}
		__delay_ms(500);
	     }
	     girarmotor(pulsos);
    };
 }
void girarmotor(int pulsos){
   if(PORTAbits.RA0){
      if(proceso == 1){
	 switch(pulsos){
	    case 1: 
	    for(int i=0; i<16;i++){
	       PORTBbits.RB0 =1;
	       __delay_ms(1.5);
	       PORTBbits.RB0 = 0;
	       __delay_ms(20);
	       }
	       proceso = 0;
	    break;
	    case 2: 
	    for(int i=0; i<16;i++){
	       PORTBbits.RB0 =1;
	       __delay_ms(2);
	       PORTBbits.RB0 = 0;
	       __delay_ms(20);
	       }
	       proceso = 0;
	    break;
	    case 3: 
	    for(int i=0; i<16;i++){
	       PORTBbits.RB0 =1;
	       __delay_ms(0.6);
	       PORTBbits.RB0 = 0;
	       __delay_ms(20);
	       }
	       proceso = 0;
	    break;
	    }
	 }
      }else
if(PORTAbits.RA1){
   if(proceso == 1){
      switch(pulsos){
	 case 1: 
	 for(int i=0; i<16;i++){
	    PORTBbits.RB1 =1;
	    __delay_ms(1.5);
	    PORTBbits.RB1 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	break;
	case 2: 
	for(int i=0; i<16;i++){
	   PORTBbits.RB1 =1;
	   __delay_ms(2);
	   PORTBbits.RB1 = 0;
	   __delay_ms(20);
	   }
	   proceso = 0;
	 break;
	 case 3: 
	 for(int i=0; i<16;i++){
	    PORTBbits.RB1 =1;
	    __delay_ms(0.6);
	    PORTBbits.RB1 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	 break;
	}
     }
  }else
if(PORTAbits.RA2){
   if(proceso == 1){
      switch(pulsos){
	 case 1: 
	 for(int i=0; i<16;i++){
	    PORTBbits.RB2 =1;
	    __delay_ms(1.5);
	    PORTBbits.RB2 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	break;
	case 2: 
	for(int i=0; i<16;i++){
	    PORTBbits.RB2 =1;
	    __delay_ms(2);
	    PORTBbits.RB2 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	 break;
	 case 3: 
	 for(int i=0; i<16;i++){
	    PORTBbits.RB2 =1;
	    __delay_ms(0.6);
	    PORTBbits.RB2 = 0;
	    __delay_ms(20);
	    }
	    proceso = 0;
	 break;
	}
     }
  }else
if(PORTAbits.RA3){
   if(proceso == 1){
      switch(pulsos){
	 case 1:
	for(int i=0; i<16;i++){
	 PORTBbits.RB3 =1;
	 __delay_ms(1.5);
	 PORTBbits.RB3 = 0;
	 __delay_ms(20);
	 }
	 proceso = 0;
	break;
	case 2: 
	 for(int i=0; i<16;i++){
	  PORTBbits.RB3 =1;
	  __delay_ms(2);
	  PORTBbits.RB3 = 0;
	  __delay_ms(20);
	  }
	  proceso = 0;
	 break;
	 case 3: 
	 for(int i=0; i<16;i++){
	  PORTBbits.RB3 =1;
	  __delay_ms(0.6);
	  PORTBbits.RB3 = 0;
	  __delay_ms(20);
	  }
	 proceso = 0;
	 break;
	}
     }
  }else
if(PORTAbits.RA4){
   if(proceso == 1){
      switch(pulsos){
	 case 1: 
	for(int i=0; i<16;i++){
	 PORTBbits.RB4 =1;
	 __delay_ms(1.5);
	 PORTBbits.RB4 = 0;
	 __delay_ms(20);
	 }
	 proceso = 0;
	break;
	case 2: 
	 for(int i=0; i<16;i++){
	  PORTBbits.RB4 =1;
	  __delay_ms(2);
	  PORTBbits.RB4 = 0;
	  __delay_ms(20);
	  }
	  proceso = 0;
	 break;
	 case 3: 
	 for(int i=0; i<16;i++){
	  PORTBbits.RB4 =1;
	  __delay_ms(0.6);
	  PORTBbits.RB4 = 0;
	  __delay_ms(20);
	  }
	 proceso = 0;
	 break;
	}
     }
  }
}